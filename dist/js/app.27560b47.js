(function(e){function t(t){for(var r,a,u=t[0],i=t[1],s=t[2],d=0,l=[];d<u.length;d++)a=u[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);f&&f(t);while(l.length)l.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o={app:0},c=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1a260563":"78fc9dff","chunk-21c735ba":"a2d62e56","chunk-21f4eb44":"27c81b43","chunk-4140e1b1":"6d8e8766","chunk-4e1780be":"9cf03bed","chunk-6cf3629a":"726c7a7e","chunk-7106183e":"3686759c","chunk-7f8397c0":"f83fb011","chunk-c9e00a8c":"e3969f4a","chunk-eaa79736":"3fbd205b"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-21f4eb44":1,"chunk-6cf3629a":1,"chunk-7f8397c0":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-1a260563":"31d6cfe0","chunk-21c735ba":"31d6cfe0","chunk-21f4eb44":"b03cbc9e","chunk-4140e1b1":"31d6cfe0","chunk-4e1780be":"31d6cfe0","chunk-6cf3629a":"b39184f6","chunk-7106183e":"31d6cfe0","chunk-7f8397c0":"9b70025b","chunk-c9e00a8c":"31d6cfe0","chunk-eaa79736":"31d6cfe0"}[e]+".css",o=i.p+r,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var s=c[u],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===r||d===o))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){s=l[u],d=s.getAttribute("data-href");if(d===r||d===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete a[e],f.parentNode.removeChild(f),n(c)},f.href=o;var g=document.getElementsByTagName("head")[0];g.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=c);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=u(e);var l=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}o[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var f=d;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"07a4":function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n("2b0e"),a=n("2f62"),o=n("bfa9"),c={adminDetails:{token:""},isProcessing:!1,isLoggedIn:!1,loginError:!1},u=n("a18c"),i=n("bc3a"),s=n.n(i),d={login:function(e,t){var n=e.commit;n("isProcessing",!0),n("loginError",!1),s.a.post("/admin/auth/login",t).then((function(e){var t=e.data.data,r=t.first_name,a=t.last_name,o=t.id,c=t.token,i=t.role,s={first_name:r,last_name:a,id:o,token:c,role:i},d=u["a"].history.current.path,l="/login"===d&&"staff"===s.role,f="/admin-login"===d&&"super"===s.role;if(l&&(n("isProcessing",!1),n("login",s),u["a"].push("/user-profile")),f&&(n("isProcessing",!1),n("login",s),u["a"].push("/admin-dashboard")),!l&&!f)throw new Error("There was an error trying to log in")})).catch((function(e){n("isProcessing",!1),n("loginError",!0),console.log(e.response.data.message)}))}},l={isProcessing:function(e){return e.isProcessing},adminDetails:function(e){return e.adminDetails},isLoggedIn:function(e){return e.isLoggedIn},loginError:function(e){return e.loginError}},f={adminDetails:{token:""},isProcessing:!1,isLoggedIn:!1},g={isProcessing:function(e,t){e.isProcessing=t},login:function(e,t){var n=t.first_name,r=t.last_name,a=t.id,o=t.token,c=t.role;e.adminDetails={first_name:n,last_name:r,id:a,token:o,role:c},e.isLoggedIn=!0},logout:function(e){"staff"===e.adminDetails.role?(Object.assign(e,f),u["a"].push("/login")):(Object.assign(e,f),u["a"].push("/admin-login"))},loginError:function(e,t){e.loginError=t}},p={state:c,actions:d,getters:l,mutations:g},m={addingUser:!1,allStaffs:[],loadingStaff:!0,productsCategories:null},h={addingUser:function(e){return e.addingUser},allStaffs:function(e){return e.allStaffs},loadingStaff:function(e){return e.loadingStaff},productsCategories:function(e){return e.productsCategories}},b={addingUser:function(e,t){e.addingUser=t},setAllStaffs:function(e,t){e.allStaffs=t},loadingStaff:function(e,t){e.loadingStaff=t}},v={createStaff:function(e,t){var n=e.commit,r=e.getters,a=r.adminDetails.token,o={headers:{token:a}};n("addingUser",!0),s.a.post("/admin/auth/signup",t,o).then((function(e){n("addingUser",!1),n("dynamicMsg",e.data.message),setTimeout((function(){return n("dynamicMsg","")}),4e3)})).catch((function(e){n("addingUser",!1),n("dynamicMsg",e.response.data.message),setTimeout((function(){return n("dynamicMsg","")}),4e3),console.log(e.response.data.message)}))},getAllStaffs:function(e){var t=e.commit,n=e.getters,r=n.adminDetails.token;t("loadingStaff",!0);var a={headers:{token:r}};s.a.get("/admin/staff/all",a).then((function(e){t("loadingStaff",!1),t("setAllStaffs",e.data.data)})).catch((function(e){t("loadingStaff",!1)}))}},k={state:m,getters:h,mutations:b,actions:v},P={dynamicMsg:"",inactiveMsg:""},y={dynamicMsg:function(e){return e.dynamicMsg},inactiveMsg:function(e){return e.inactiveMsg}},w={dynamicMsg:function(e,t){e.dynamicMsg=t},inactiveMsg:function(e,t){e.inactiveMsg=t}},C={state:P,getters:y,mutations:w},S={productName:null,successAddingProduct:!1,loadingProduct:!1,productCategory:{},loadingProductCategory:!1,testsIds:null,productsInCategory:[]},j={productName:function(e){return e.productName},successAddingProduct:function(e){return e.successAddingProduct},loadingProduct:function(e){return e.loadingProduct},productCategory:function(e){return e.productCategory},loadingProductCategory:function(e){return e.loadingProductCategory},testsIds:function(e){return e.testsIds},productsInCategory:function(e){return e.productsInCategory}},I={setProductName:function(e,t){e.productName=t},successAddingProduct:function(e,t){e.successAddingProduct=t},loadingProduct:function(e,t){e.loadingProduct=t},setProductCategory:function(e,t){e.productCategory=t},loadingProductCategory:function(e,t){e.loadingProductCategory=t},testsIds:function(e,t){e.testsIds=t},productsInCategory:function(e,t){e.productsInCategory=t}},x=(n("7db0"),n("d3b7"),n("96cf"),n("1da1")),O={createProduct:function(e,t){var n=e.commit,r=e.getters,a=e.dispatch,o=r.adminDetails,c=r.productCategory,u=o.token,i={headers:{token:u}};n("loadingProduct",!0),s.a.post("/admin/products/new-product",t,i).then((function(e){n("successAddingProduct",!0),n("loadingProduct",!1),a("getProductsInCategory",c.id).then((function(e){var t=e.data,r=t.data;n("productsInCategory",r)})).catch((function(e){return e}))})).catch((function(e){n("loadingProduct",!1)}))},getAllProducts:function(e){var t=e.commit,n=e.getters,r=n.adminDetails.token,a={headers:{token:r}};s.a.get("/admin/products/blend",a).then((function(e){t("loadingProduct",!1)})).catch((function(e){t("loadingProduct",!1)}))},getTestIds:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function n(){var r,a,o,c,u,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.getters,o=a.adminDetails.token,c={headers:{token:o}},n.prev=3,n.next=6,s.a.get("/admin/products/test/".concat(t),c);case 6:u=n.sent,i=u.data.data,r("testsIds",i),n.next=14;break;case 11:return n.prev=11,n.t0=n["catch"](3),n.abrupt("return",n.t0);case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()},setProductName:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function n(){var r,a,o,c,u,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.dispatch,r("loadingProductCategory",!0),n.prev=2,n.next=5,a("getCategories");case 5:o=n.sent,c=o.data.data,u=c.find((function(e){return e.product_type===t})),a("getTestIds",u.id),n.prev=9,i=a("getProductsInCategory",u.id),s=i.data.data,r("productsInCategory",s),n.next=18;break;case 15:return n.prev=15,n.t0=n["catch"](9),n.abrupt("return",n.t0);case 18:r("setProductCategory",u),n.next=24;break;case 21:return n.prev=21,n.t1=n["catch"](2),n.abrupt("return",n.t1);case 24:return n.prev=24,r("loadingProductCategory",!1),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[2,21,24,27],[9,15]])})))()},getCategories:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getters,r=n.adminDetails.token,a={headers:{token:r}},t.prev=3,t.next=6,s.a.get("/admin/products/categories",a);case 6:return o=t.sent,t.abrupt("return",Promise.resolve(o));case 10:return t.prev=10,t.t0=t["catch"](3),t.abrupt("return",Promise.reject(t.t0));case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},getProductsInCategory:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function n(){var r,a,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.getters,a=r.adminDetails.token,o={headers:{token:a}},n.prev=3,n.next=6,s.a.get("/admin/products/all/".concat(t),o);case 6:return c=n.sent,n.abrupt("return",Promise.resolve(c));case 10:return n.prev=10,n.t0=n["catch"](3),n.abrupt("return",Promise.reject(n.t0));case 13:case"end":return n.stop()}}),n,null,[[3,10]])})))()},deleteProductInCategory:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function n(){var r,a,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.getters,a=r.adminDetails.token,o={headers:{token:a}},n.prev=3,n.next=6,s.a.delete("/admin/products/".concat(t),o);case 6:return c=n.sent,n.abrupt("return",Promise.resolve(c));case 10:return n.prev=10,n.t0=n["catch"](3),n.abrupt("return",Promise.reject(n.t0));case 13:case"end":return n.stop()}}),n,null,[[3,10]])})))()},updateProduct:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function n(){var r,a,o,c,u,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.getters,a=r.adminDetails.token,o={headers:{token:a}},c=t.id,u=t.specification,n.prev=4,n.next=7,s.a.put("/admin/products/edit/".concat(c),{productSpecification:u},o);case 7:return i=n.sent,n.abrupt("return",Promise.resolve(i));case 11:return n.prev=11,n.t0=n["catch"](4),n.abrupt("return",Promise.reject(n.t0));case 14:case"end":return n.stop()}}),n,null,[[4,11]])})))()}},A={state:S,getters:j,mutations:I,actions:O},E=new o["a"]({storage:localStorage});r["default"].use(a["a"]);var D=new a["a"].Store({modules:{auth:p,staffs:k,popup:C,product:A},plugins:[E.plugin]})},"56d7":function(e,t,n){"use strict";n.r(t),n.d(t,"eventBus",(function(){return P}));n("fb6a"),n("b0c0"),n("a9e3"),n("d3b7"),n("25f0"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view"),n("portal-target",{attrs:{name:"root"}})],1)},o=[],c={name:"App"},u=c,i=(n("5c0b"),n("2877")),s=Object(i["a"])(u,a,o,!1,null,null,null),d=s.exports,l=n("a18c"),f=n("07a4"),g=n("1232"),p=n("dcb8"),m=n.n(p),h=n("2b88"),b=n.n(h),v=n("bc3a"),k=n.n(v);k.a.interceptors.request.use((function(e){return NProgress.start(),e})),k.a.interceptors.response.use((function(e){return NProgress.done(),e}),(function(e){return NProgress.done(),e})),k.a.defaults.baseURL="https://lims-total.herokuapp.com/api/v1",r["default"].prototype.axios=k.a;var P=new r["default"];r["default"].use(m.a,{eventEmitter:P,store:f["a"],idleTime:6e5,startAtIdle:!1}),r["default"].use(b.a),l["a"].beforeResolve((function(e,t,n){e.name&&NProgress.start(),n()})),l["a"].afterEach((function(){NProgress.done()})),r["default"].config.productionTip=!1,new r["default"]({router:l["a"],store:f["a"],computed:{userDetails:function(){return f["a"].getters.adminDetails}},methods:{hasTokenExpired:function(e,t){return e<=t}},watch:{"userDetails.token":{handler:function(e){var t=this;if(clearInterval(this.interval),e){var n=Object(g["a"])(e),r=n.exp;this.interval=setInterval((function(){var e=Number((new Date).getTime().toString().slice(0,10)),n=t.hasTokenExpired(r,e);n&&f["a"].commit("logout")}),1e3)}},immediate:!0}},render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},"9c0c":function(e,t,n){},a18c:function(e,t,n){"use strict";n("d3b7");var r=n("5530"),a=n("2b0e"),o=n("8c4f"),c=n("07a4"),u={beforeEnter:function(e,t,n){var r=c["a"].getters.isLoggedIn&&"super"===c["a"].getters.adminDetails.role;r?"/admin-login"===e.path?n("admin-dashboard"):n():"/admin-login"===e.path?n():n("/admin-login")}};a["default"].use(o["a"]);var i=[{path:"",name:"LandingPage",component:function(){return n.e("chunk-c9e00a8c").then(n.bind(null,"d115"))}},{path:"/login",name:"StaffLogin",component:function(){return n.e("chunk-4140e1b1").then(n.bind(null,"d98b"))}},Object(r["a"])(Object(r["a"])({path:"/admin-login",name:"AdminLogin"},u),{},{component:function(){return n.e("chunk-4e1780be").then(n.bind(null,"42d5"))}}),{path:"/user-profile",component:function(){return n.e("chunk-7f8397c0").then(n.bind(null,"0604"))},children:[{path:"",name:"SearchOrCreate",component:function(){return n.e("chunk-21c735ba").then(n.bind(null,"368a"))}},{path:"blend",name:"BlendCert",component:function(){return n.e("chunk-6cf3629a").then(n.bind(null,"7849"))}}]},Object(r["a"])(Object(r["a"])({path:"/admin-dashboard"},u),{},{component:function(){return n.e("chunk-7106183e").then(n.bind(null,"0069"))},children:[{path:"",name:"AdminHome",component:function(){return n.e("chunk-eaa79736").then(n.bind(null,"2228"))}},{path:"add-user",name:"AdminAddStaff",component:function(){return n.e("chunk-21f4eb44").then(n.bind(null,"b30d"))}},{path:"product",name:"AdminProduct",component:function(){return n.e("chunk-1a260563").then(n.bind(null,"d8ac"))}}]})],s=new o["a"]({mode:"history",base:"/",routes:i});t["a"]=s}});
//# sourceMappingURL=app.27560b47.js.map