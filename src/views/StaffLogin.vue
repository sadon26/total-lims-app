<template>
  <form @submit.prevent="login({ igg, password })" class="staff-login">
    <div class="login-logo">
      <img src="../assets/images/total-logo 1.svg" alt="total-logo" />
    </div>
    <div class="igg__text-wrap">
      <input v-model="igg" type="text" class="igg-input" required />
      <label for="igg" class="igg-text">
        <span class="inner">IGG</span>
        <div class="icons">
          <img src="../assets/images/user 1.svg" alt="user-icon" />
        </div>
      </label>
    </div>
    <div class="igg__text-wrap">
      <input v-model="password" :type="type" class="igg-input" required />
      <label for="igg" class="igg-text">
        <span class="inner">PIN</span>
      </label>
      <div @click="showHide" class="icons eye">
        <svg
          id="Layer_1"
          data-name="Layer 1"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 35.72 27.98"
        >
          <defs></defs>
          <path
            class="cls-1"
            d="M299,372.14c-1.28-1.12-1.47.54-2.1,1a7.31,7.31,0,0,0-1.66,1.67c-1,1.39-2.22,1.57-3.89,1a16.8,16.8,0,0,0-7.91-.77,21,21,0,0,0-15.68,10.15c.73,3.51,3.34,5.59,6,7.42,1.77,1.19,2.14,2,.31,3.29-.5.37-.84,1-1.35,1.3-1.24.85-1,1.69-.13,2.6h.47c4.78-5.42,10.15-10.26,15.19-15.42,3.3-3.37,6.7-6.65,10-10C298.85,373.76,300.34,373.28,299,372.14Zm-28.86,13.91a1.75,1.75,0,0,1,.28-1.32c1.15-2.12,4.75-5,7.73-6-1.23,2.29-2.35,4.31-2.35,6.79a14.23,14.23,0,0,0,2,6.6C275.39,391.84,270.66,388,270.18,386.05Zm19.89-6.38a1.69,1.69,0,0,1-2.25,1.07c-3.86-1.05-6.57.37-7.41,3.66a4.45,4.45,0,0,0,.24,3.21,1.6,1.6,0,0,1-1.06,2.4c-.94.31-1.09-.89-1.33-1.54a19.86,19.86,0,0,1-.62-2.39c-.08-6,6-10,11.13-7.7C289.34,378.64,290.44,378.77,290.07,379.67Z"
            fill="#ED1A3B"
            transform="translate(-267.8 -371.76)"
          />
          <path
            fill="#ED1A3B"
            class="cls-2"
            d="M279.88,395.39c1.18-1.75,2.32-2.45,4.57-1.95,5.38,1.21,10.13-4,9-9.53-.25-1.16-.54-2.15.92-2.91,2.22,4.12,1.35,7.88-1.68,12a17.2,17.2,0,0,0,8.47-6.81c.49-.73-.13-1.33-.54-1.89a19.42,19.42,0,0,0-3.82-3.81c-.42-.32-1.33-.53-.71-1.39a1.09,1.09,0,0,1,1.78-.26,20.43,20.43,0,0,1,5.39,5.84,1.8,1.8,0,0,1,0,2C299.42,394.14,287.93,398.51,279.88,395.39Z"
            transform="translate(-267.8 -371.76)"
          />
          <path
            fill="#ED1A3B"
            class="cls-3"
            d="M284.73,390.86l6.06-5.95a4.07,4.07,0,0,1-1.26,4.54C288.19,390.73,286.67,391.48,284.73,390.86Z"
            transform="translate(-267.8 -371.76)"
          />
          <path
            fill="#ED1A3B"
            class="cls-4"
            d="M285.12,382.65c.14.11.45.26.43.35-.08.47-.53.54-.89.61-.13,0-.45-.23-.45-.36C284.21,382.7,284.72,382.79,285.12,382.65Z"
            transform="translate(-267.8 -371.76)"
          />
          <path
            fill="#ED1A3B"
            class="cls-5"
            d="M283.4,383.77c.31.8.31,1.55-.19,1.64-.81.16-.48-.52-.33-.91A3.67,3.67,0,0,1,283.4,383.77Z"
            transform="translate(-267.8 -371.76)"
          />
        </svg>
      </div>
    </div>
    <p v-if="loginError" style="color: #ED1A3A">Wrong IGG or PIN</p>
    <button class="login__btn" v-if="!isProcessing">LOGIN</button>
    <div class="login__btn-loading" v-if="isProcessing">
      <div class="__spinner">
        <img src="../assets/images/Ripple.svg" alt="ripple" />
      </div>
    </div>
  </form>
</template>

<script>
import { mapGetters, mapActions, mapMutations } from 'vuex';

export default {
  name: 'StaffLogin',
  data() {
    return {
      igg: null,
      password: null,
      type: 'password',
    };
  },
  computed: {
    ...mapGetters(['isProcessing', 'loginError']),
  },
  methods: {
    ...mapActions(['login']),
    ...mapMutations({ loginErr: 'loginError', processing: 'isProcessing' }),
    showHide() {
      this.type == 'password' ? (this.type = 'text') : (this.type = 'password');
    },
  },
  created() {
    this.loginErr(false);
    this.processing(false);
  },
};
</script>
